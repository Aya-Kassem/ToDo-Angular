"use strict";(self.webpackChunkToDo=self.webpackChunkToDo||[]).push([[476],{1476:(O,c,r)=>{r.r(c),r.d(c,{AuthModule:()=>Z});var m=r(6814),p=r(6841),u=r(2078),g=r(2253),o=r(95),d=r(5619),t=r(4946),h=r(4626),f=r(4248),v=r(4122);const I=["loggingForm"],_=["imgContainer"];function w(i,l){if(1&i&&t._UZ(0,"div",19,20),2&i){const e=t.oxw(2);t.Q6J("ngStyle","signIn"==e.templateType?e.signInbg:e.signUpbg)}}function x(i,l){if(1&i&&t._UZ(0,"app-toast",21),2&i){const e=t.oxw(2);t.Q6J("msg",e.errMsg)("fire",e.requestSend)("type",e.error)}}function C(i,l){1&i&&(t.TgZ(0,"p",22),t._uU(1," Please Enter Valid Email! "),t.qZA())}function y(i,l){1&i&&(t.TgZ(0,"p",22),t._uU(1," Please Enter Valid Password, Min Length is 6 "),t.qZA())}function A(i,l){if(1&i){const e=t.EpF();t.TgZ(0,"div",3),t.YNc(1,w,2,1,"div",4),t.TgZ(2,"div",5)(3,"form",6,7),t.NdJ("ngSubmit",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.registerUser())}),t.TgZ(5,"h5",8),t._uU(6),t.qZA(),t.YNc(7,x,1,3,"app-toast",9),t.TgZ(8,"div",10)(9,"label",11),t._uU(10,"Email: "),t.qZA(),t._UZ(11,"input",12),t.YNc(12,C,2,0,"p",13),t.qZA(),t.TgZ(13,"div",10)(14,"label",14),t._uU(15,"Password: "),t.qZA(),t._UZ(16,"input",15),t.YNc(17,y,2,0,"p",13),t.qZA(),t.TgZ(18,"button",16),t._uU(19),t.qZA(),t.TgZ(20,"p",17),t._uU(21),t.TgZ(22,"a",18),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.switchLogMode())}),t._uU(23),t.qZA()()()()()}if(2&i){const e=t.oxw();let n,s;t.xp6(1),t.Q6J("ngIf",e.showImage),t.xp6(2),t.Q6J("formGroup",e.userForm),t.xp6(3),t.Oqu("signIn"==e.templateType?"Sign In":"Register Now"),t.xp6(1),t.Q6J("ngIf",e.errMsg),t.xp6(5),t.Q6J("ngIf",null!=(null==(n=e.userForm.get("email"))?null:n.errors)&&(null==(n=e.userForm.get("email"))?null:n.touched)),t.xp6(5),t.Q6J("ngIf",null!=(null==(s=e.userForm.get("password"))?null:s.errors)&&(null==(s=e.userForm.get("password"))?null:s.touched)),t.xp6(1),t.Q6J("disabled",!e.userForm.valid),t.xp6(1),t.hij("","signIn"==e.templateType?"Sign In":"Register"," "),t.xp6(2),t.hij(" ","signIn"==e.templateType?"Don`t Have an Account ?":"Already Have an Account ?"," "),t.xp6(2),t.Oqu("signIn"==e.templateType?"Sign Up":"Sign In")}}function M(i,l){1&i&&(t.TgZ(0,"div",23),t._UZ(1,"app-spinner",24),t.qZA())}const S=[{path:"",component:(()=>{class i{constructor(e,n){this._AuthService=e,this._Router=n,this.isLoading=!1,this.errMsg="",this.getScreenWidth=new d.X(0),this.showImage=!0,this.signInbg={"background-image":"url('assets/images/Tablet login-amico.svg')"},this.signUpbg={"background-image":"url('assets/images/Sign up-amico.svg')"},this.requestSend=new d.X(!1),this.error="error",this.validationError="Please Enter Valid Email!",this.userForm=new o.cw({email:new o.NI("",[o.kI.required,o.kI.email]),password:new o.NI("",[o.kI.required,o.kI.minLength(6)])})}ngOnInit(){this.templateType="signIn",this.getScreenWidth.next(window.innerWidth)}ngAfterViewInit(){setTimeout(()=>{this.img=this.imgContainer.nativeElement,this.differentScreenStyle(this.getScreenWidth.value)})}switchLogMode(){this.templateType="signIn"==this.templateType?"auth/signUp":"signIn",this.errMsg="",this.userForm.reset()}registerUser(){"auth/signUp"==this.templateType?this.signUp():this.signIn()}signUp(){if(!this.userForm.valid)return;let e={email:this.userForm.controls.email.value,password:this.userForm.controls.password.value};this.isLoading=!0,this._AuthService.signUp(e).subscribe({next:n=>{this.isLoading=!1,this.saveUserInfo(n)},error:n=>{this.errMsg=n,this.requestSend.next(!0),this.isLoading=!1},complete:()=>{this.templateType="signIn",this._Router.navigate(["/auth"])}})}signIn(){if(!this.userForm.valid)return;let e={email:this.userForm.controls.email.value,password:this.userForm.controls.password.value};this.isLoading=!0,this._AuthService.signIn(e.email,e.password).subscribe({next:n=>{this.isLoading=!1,this._Router.navigate(["/tasks"])},error:n=>{this.isLoading=!1,this.requestSend.next(!0),this.errMsg=n},complete:()=>{this._Router.navigate(["/tasks"])}})}onWindowResize(){this.getScreenWidth.next(window.innerWidth),this.differentScreenStyle(window.innerWidth)}saveUserInfo(e){let n=JSON.parse(localStorage.getItem("users")||"[]"),s=n.filter(a=>a.email===e.email)[0];s?console.log(s.email):(n.push({localId:e.localId,email:e.email}),localStorage.setItem("users",JSON.stringify(n)))}lgScreenStyle(e){this.showImage=!0,(e>=990&&e<1201||e>1201)&&(this.img.classList.remove("col-md-6"),this.img.classList.add("col-md-5"))}differentScreenStyle(e){e<=768?this.showImage=!1:e>769&&e<990?this.showImage=!0:this.lgScreenStyle(e)}static#t=this.\u0275fac=function(n){return new(n||i)(t.Y36(h.e),t.Y36(g.F0))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-auth"]],viewQuery:function(n,s){if(1&n&&(t.Gf(I,5),t.Gf(_,5)),2&n){let a;t.iGM(a=t.CRH())&&(s.loggingForm=a.first),t.iGM(a=t.CRH())&&(s.imgContainer=a.first)}},hostBindings:function(n,s){1&n&&t.NdJ("resize",function(b){return s.onWindowResize(b)},!1,t.Jf7)},decls:3,vars:2,consts:[[1,"container","h-100"],["class","row h-100 m-0 signIn",4,"ngIf"],["class","row signIn m-0 h-100",4,"ngIf"],[1,"row","h-100","m-0","signIn"],["class","col-md-6 me-auto h-100 img_container",3,"ngStyle",4,"ngIf"],[1,"col-md-6","h-100","formCotainer","py-1","d-flex","flex-column"],[1,"loggingForm","d-flex","h-100","align-items-center","flex-column",3,"formGroup","ngSubmit"],["loggingForm",""],[1,"header","fw-bold","form-group"],[3,"msg","fire","type",4,"ngIf"],[1,"form-group","my-2"],["for","mail",1,"my-1"],["type","email","name","mail","formControlName","email",1,"form-control"],["class","mt-2 errMsg",4,"ngIf"],["for","pass",1,"my-1"],["type","password","name","pass","formControlName","password",1,"form-control"],["type","submit",1,"btn","mt-3","mb-2",3,"disabled"],[1,"mt-auto","fw-bold","form-group"],[1,"redirectBtn","fw-bold",3,"click"],[1,"col-md-6","me-auto","h-100","img_container",3,"ngStyle"],["imgContainer",""],[3,"msg","fire","type"],[1,"mt-2","errMsg"],[1,"row","signIn","m-0","h-100"],[1,"d-flex","align-items-center","justify-content-center"]],template:function(n,s){1&n&&(t.TgZ(0,"div",0),t.YNc(1,A,24,10,"div",1),t.YNc(2,M,2,0,"div",2),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngIf",!s.isLoading),t.xp6(1),t.Q6J("ngIf",s.isLoading))},dependencies:[m.O5,m.PC,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,f.q,v.x],styles:[".img_container[_ngcontent-%COMP%]{background-size:contain;background-repeat:no-repeat}.form-control[_ngcontent-%COMP%]:focus{outline:none;box-shadow:none;border-color:#627254}.btn[_ngcontent-%COMP%], .redirectBtn[_ngcontent-%COMP%]{text-decoration:none}.btn[_ngcontent-%COMP%]{background-color:#627254;color:#fff;border-radius:.375rem;font-weight:500}.header[_ngcontent-%COMP%], .redirectBtn[_ngcontent-%COMP%]{color:#627254}.header[_ngcontent-%COMP%]{font-size:30px}.redirectBtn[_ngcontent-%COMP%]{cursor:pointer}.err[_ngcontent-%COMP%]{color:#dc3545;font-weight:700}@media screen and (max-width: 768px){.loggingForm[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:80%}}@media screen and (min-width: 769px) and (max-width: 989px){.loggingForm[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%}}@media screen and (min-width: 990px){.loggingForm[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:80%}}.errMsg[_ngcontent-%COMP%]{color:#dc3545;font-weight:500}"]})}return i})(),canActivate:[(i,l)=>{const e=(0,t.f3M)(h.e),n=(0,t.f3M)(g.F0);return!e.user.value.activeUser||n.navigate(["tasks"])}]}];let T=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[g.Bz.forChild(S),g.Bz]})}return i})();var F=r(5895),U=r(5357);let Z=(()=>{class i{static#t=this.\u0275fac=function(n){return new(n||i)};static#e=this.\u0275mod=t.oAB({type:i});static#n=this.\u0275inj=t.cJS({imports:[m.ez,T,p.EV,u.R,o.u5,o.UX,F.R,u.R,U.E]})}return i})()}}]);